![fumaSim](https://github.com/RShock/fumaSim/actions/workflows/maven.yml/badge.svg?branch=main)

# 布魔SIM

布魔sim致力于模拟游戏《天下布魔》中角色的输出，目前正处于开发的第一步：模拟风队的伤害。

因为只考虑打桩，治疗与血量等属性在目前是不存在的

## Meta系统

布魔SIM基于个人构思的meta系统，具有模拟回合制游戏/RPG游戏中的复杂伤害结算/卡牌游戏以及其复杂逻辑的能力，理论上可以用一套系统运行多种规则，具备元属性。

### 事件层
meta系统中事件是第一公民也是底层基础，所有代码都由事件触发，而新的代码又会触发更多的事件。从而使得世界运转起来。

回调函数是不允许的。

### buff层

buff层位于第二层，其承载着事件，游戏中大部分持续状态都由buff来表示。

系统级规则比如回合的接替等也是一个buff，依附在棋盘上。

skill是一种特殊的Buff

### 数据池

游戏中的数据被塞在池子中可以随时取用。这实际上是动态语言的特性（可以随时声明和读取变量）

但是考虑到这里只模拟布魔，还是用静态语言编写了大部分属性，这样编码更加便利。数据池的目前只用于计算回合数这个事件中。

### DSL builder

事件的创建非常繁琐，因此这里再封装一层DSL语言用于创建这些事件，具体参考skillBuilder类

skillBuilder严格遵循事件结构 分为trigger act两部分，同时可以接续and和then方便异步执行

### 未完成的功能

#### 原子操作

每个涉及数据池的步骤都应该作为一个原子存在于日志中，这样就可以实现回滚，进而实现搜索与AI

日志可以实现一些高维效果。

* 什么是高维效果？

高维效果（个人命名）指的是会调用特殊数据的效果，例如“若本回合曾经有随从死亡，则触发”，其执行时必须翻看日志系统

另一种高维效果是 “若该卡牌会触发抽卡效果，反击之”涉及的是未来预测系统

一些卡拥有阅读和改写其他卡技能的能力，非常难以实现

这些仍需要后续的完善

不过布魔是个很单纯的游戏，上面说的效果一个都没有，可喜可贺