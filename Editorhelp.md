# 如果你想添加角色
## 概论
总的来说，如果需要添加新的角色，需要：
1. 添加新的角色
2. 添加角色技能并将其与对应角色绑定

## 添加角色
我们将以添加一个新角色作为实例，来引导如何添加一个新的角色，以下将以添加"机灵古怪 塞露西亚"作为例子：

| 角色名 | 昵称 | ID | 属性 | 职业  | 类型  | 稀有度 | 攻击力 | 生命值 | 图片 | 图鉴攻击力 | 图鉴生命力 |
|-----|----|---|---|-----|-----|-----|-----|-----|-------------|-----------|-------------|
| 机灵古怪 塞露西亚 | 幼精 | 1 |风属性| 攻击者 | 限定角 | SSR | 1016 | 3470.4 | 机灵古怪_塞露西亚.png | 281230.3143 | 960611.8926 |

由例子可见，一个角色共有角色名、昵称、ID、属性等12种属性，我们需要将其一一填入之中，对于每种属性的含义与取值，将会在如下做更详细的解释。

<font color='red'>**TODO：稍后添加**</font>
### 1. 角色名
### 2. 昵称

## 添加角色技能
所有的技能都将通过TriggerManager注册，被放入技能池中。与添加新角色类似，我们将通过引入"如何添加一个新的技能"来帮助理解绑定技能到角色，以下将用"机灵古怪 塞露西亚的1001"技能作为例子。

| 技能所属者     | ID   | 类型  | 类型2 | 描述（人话）                              | 触发时点 | 描述（程序语言） |
|-----------|------|-----|----|-------------------------------------|------|----------|
| 机灵古怪 塞露西亚 | 1001 | 必杀技 | 1绊 | 以自身攻击力330%对目标造成伤害，再使自身攻击力增加20%（3回合） | 释放必杀 | 对目标330%技能伤害,自身攻击力+20%(3回合) |

由例子可见，一个角色技能共有技能所属者，ID，类型，类型2等7种属性。

### 1. 技能所属者
顾名思义就是需要绑定的角色名

### 2. ID
ID的千位上是角色的ID，如："技能ID1001-角色ID1", "技能ID43034-角色ID43"。 ID的最后三位为技能的ID。  
*注意：技能千位上的角色ID必须与角色表格中的ID一致*

### 3. 类型
技能类型由<类型>和<类型2>共同决定，<类型>为技能的实际类型，<类型2>提供技能的等级
目前FumaSim实装的在天下布魔中存在的技能如下：
1. 必杀技
2. 队长技
3. 被动
4. 普攻
5. 防御
6. 动态技能

**必杀技**和**被动**将存在等级之分，如不同绊数会启用不同的技能，角色不同的星级与潜力也会启用不同的技能。  
**队长技**只会在角色作为队长（1号位）的时候启用。  
**普攻**和**防御**分别只会在角色进行普攻和防御动作的时候启用。  
**动态技能**是一种由角色技能产生出来的新技能（新效果）。以技能"1011"和"1018"作为例子：技能"1011"的描述为"使精灵王赛鲁西亚获得必杀后 触发目标受到伤害增加20% 3回合 效果"，因此我们需要额外给"精灵王 塞露西亚"给予一个动态技能"必杀后，触发目标受到伤害增加20%（3回合）"来达成，也就是我们的技能"1018"。

*注意：此技能泛指一切会产生数值变化的行为，普攻与防御等会造成数值变化的行为也被归纳为技能*  

### 4. 类型2
必杀技和被动都具有技能等级。  
对于**必杀技**而言，不同等级的必杀技当且仅会启用当前等级的技能，如1绊的"机灵古怪 塞露西亚"只会启用1绊的必杀技"技能ID1001" 。必杀技具体等级定义如下：
1. 1绊
2. 2绊
3. 3绊
4. 4绊
5. 5绊

然而对于**被动而言**，不同等级的被动将会向下继承，即5星的"机灵古怪 塞露西亚"，将会拥有1星被动技能"1012"、3星被动技能"1013"和5星被动技能"1014"。被动具体等级定义如下：
1. 一星
2. 三星
3. 五星
4. 六潜
5. 十二潜

*注意：仅必杀技和被动存在类型2，其余技能不存在技能等级之分*

### 5. 描述（人话）
实际现实在游戏中的人类可读技能描述语言。

### 6. 触发时点
此项为技能触发的时机，具体时机可分为如下几类：
1. 被动光环
2. 游戏开始时
3. 回合开始
4. 释放普攻
5. 释放普攻后
6. 释放必杀
7. 释放必杀后
8. 攻击后
9. 快速普攻追击

其中**被动光环**和**游戏开始时**皆为有且仅有一次启用的技能，但两者触发的时机有先后顺序，被动光环处理将会先于游戏开始时。  
**回合开始**为时点的技能，将会在每回合开始时，被启用一次。  
**释放普攻**与**释放必杀**为普攻技能和必杀技技能特有时点，将会在普攻/必杀时，被启用一次。  
**释放普攻后**、**释放必杀后**和**攻击后**分别为普攻技能后、必杀技能后和普攻技能/必杀技能后特有时点，将会在普攻/必杀效果结算后，被启用一次。对于**攻击后而言**，普攻/必杀技能都会触发此时点。  
<font color='red'>**[不确定] 快速普攻追击**为动态技能特有时点，一般用于"<普攻时，追加技能以自身攻击力37.5/45/45/52.5/60%对目标造成伤害>"。结算时点在<释放普攻后>之后。</font>

<font color='red'>**TODO：稍后补全**</font>
### 7. 描述（程序语言）
#### 7.1 技能构成

#### 7.2 技能条件

#### 7.3 技能效果

#### 7.4 技能目标

#### 7.5 激活型技能
当技能以"如果"开头时，此技能将会被识别为激活型技能，激活型语法为：  
`如果<激活条件>则<技能效果>`  
其中：
1. `<激活条件>`为技能激活的条件，其语法为`<目标><条件>`
2. `<技能效果>`为技能效果

实例：`如果队伍中风属性数量为5则友方攻击力+100%`意为"队伍中有5名风属性角色时，发动全体攻击力增加100%效果"

#### 7.6 特殊：时点为"回合开始"的技能
当技能触发时点为"回合开始"时，角色技能将会有特殊的语法：  
`<循环回合>N+<起始回合>回合触发：<技能效果>`  
其中：  
1. `<循环回合>`为多少回合启用一次技能
2. `<起始回合>`为多少回合开始记录启用技能循环
3. `<技能效果>`为技能效果  

实例：`3N+1回合触发:目标受到伤害+35%(1回合)`意为"每经过3回合，触发"使目标受到伤害增加35%(1回合)"效果"



